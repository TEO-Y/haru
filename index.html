<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>í•˜ë£¨ í•œ ì¤„</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo", sans-serif;
      background: #f5f6f7;
      margin: 0;
      padding: 20px;
    }
    .box {
      max-width: 700px;
      margin: 40px auto;
      background: white;
      border-radius: 16px;
      padding: 24px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.08);
    }
    h1 {
      margin-top: 0;
      font-size: 22px;
    }
    .question {
      font-size: 20px;
      font-weight: 700;
      background: #f1f3f5;
      padding: 14px;
      border-radius: 12px;
      margin-bottom: 14px;
    }
    textarea {
      width: 100%;
      height: 110px;
      font-size: 16px;
      padding: 12px;
      border-radius: 12px;
      border: 1px solid #ddd;
      box-sizing: border-box;
    }
    button {
      margin-top: 12px;
      padding: 12px 16px;
      border-radius: 12px;
      border: none;
      font-size: 15px;
      cursor: pointer;
      background: #4c6ef5;
      color: white;
    }
    .saved {
      margin-top: 14px;
      font-size: 14px;
      color: #555;
    }
    #today {
      font-size: 13px;
      color: #999;
      margin-bottom: 16px;
    }
    .history {
  margin-top: 40px;
}

.history h2 {
  font-size: 16px;
  margin-bottom: 12px;
}
.entry {
  padding: 16px 0;
  border-top: 1px solid #eee;
}

.entry + .entry {
  margin-top: 12px;
}

  .entry.today {
  background: #f8f9ff;
  border-radius: 8px;
  padding: 12px;
}

.entry .date {
  font-size: 13px;
  color: #888;
  margin-bottom: 6px;
}

.entry .content {
  font-size: 14px;
  color: #333;
  white-space: pre-line;
}

  .date {
  cursor: pointer;
  font-weight: 600;
}



  </style>
</head>
<body>

  <div class="box">
    <h1>ğŸ“ ì˜¤ëŠ˜ì˜ ê¸°ë¡</h1>
    <div id="today"></div>
    <div class="question" id="question"></div>
   
    <input type="file" id="photo" accept="image/*">
    <textarea id="answer" placeholder="ì˜¤ëŠ˜ì„ í•œ ì¤„ë¡œ ë‚¨ê²¨ë³´ì. ì§§ì•„ë„ ê´œì°®ì•„."></textarea>

    <button onclick="save()">ì €ì¥í•˜ê¸°</button>
    <button onclick="exportData()">ë‚´ë³´ë‚´ê¸°</button>


    <div class="saved" id="saved"></div>
  <div class="history">
    <h2>ğŸ“š ê¸°ë¡</h2>
    <div id="history"></div>
  </div>
 
  </div>




  <script>
    const questions = [
      "ì˜¤ëŠ˜ ê°€ì¥ ê¸°ì–µì— ë‚¨ëŠ” ìˆœê°„ì€?",
      "ì˜¤ëŠ˜ ë‚˜ë¥¼ ì›ƒê²Œ ë§Œë“  ê±´ ë­ì˜€ì–´?",
      "ì˜¤ëŠ˜ ì œì¼ í˜ë“¤ì—ˆë˜ ê±´ ë­ì˜€ì–´?",
      "ì˜¤ëŠ˜ ìŠ¤ìŠ¤ë¡œ ì˜í–ˆë‹¤ê³  ëŠë‚€ ê±´?",
      "ì˜¤ëŠ˜ì˜ ê°ì •ì„ í•œ ë‹¨ì–´ë¡œ ë§í•˜ë©´?",
      "ì˜¤ëŠ˜ ê°€ì¡±ì—ê²Œ ê³ ë§ˆì› ë˜ ìˆœê°„ì€?",
      "ì˜¤ëŠ˜ í•˜ë£¨ë¥¼ í•œ ë¬¸ì¥ìœ¼ë¡œ ì •ë¦¬í•˜ë©´?"
    ];

    const q = questions[Math.floor(Math.random() * questions.length)];
    document.getElementById("question").innerText = q;

    function save() {
      const text = document.getElementById("answer").value.trim();
      const file = document.getElementById("photo").files[0];


      if (!text) return alert("í•œ ì¤„ì´ë¼ë„ ì ì–´ì¤˜ ğŸ™‚");

      const today = new Date().toLocaleDateString();
      const reader = new FileReader();
      reader.onload = function () {
      const image = reader.result || "";
      localStorage.setItem(today, q + " / " + text + " || " + image);
      renderHistory();
};
if (file) reader.readAsDataURL(file);
else {
  localStorage.setItem(today, q + " / " + text + " || ");
  renderHistory();
}


      document.getElementById("saved").innerText =
        "âœ… ì €ì¥ë¨ (" + today + ")";
      document.getElementById("answer").value = "";
    }
  

  </script>
<script>
  const d = new Date();
  document.getElementById("today").innerText =
    d.getFullYear() + "ë…„ " + (d.getMonth() + 1) + "ì›” " + d.getDate() + "ì¼";
</script>
<script>
  function exportData() {
    let content = "ğŸ“ í•˜ë£¨í•œì¤„ ê¸°ë¡\n\n";

    for (let i = 0; i < localStorage.length; i++) {
      const key = localStorage.key(i);
      const raw = localStorage.getItem(key);
      const parts = raw.split(" || ");
      const text = parts[0];
      const image = parts[1] || "";


      content += `${key}\n${text}\n\n`;

    }

    const blob = new Blob([content], { type: "text/plain" });
    const url = URL.createObjectURL(blob);

    const a = document.createElement("a");
    a.href = url;
    a.download = "í•˜ë£¨í•œì¤„.txt";
    a.click();

    URL.revokeObjectURL(url);
  }
</script>
<script>
function renderHistory() {
  const container = document.getElementById("history");
  container.innerHTML = "";

  for (let i = 0; i < localStorage.length; i++) {
    const key = localStorage.key(i);
    const raw = localStorage.getItem(key);

    if (!raw) continue;

    const parts = raw.split(" || ");
    const text = parts[0];
    const image = parts[1] || "";

    const div = document.createElement("div");
    div.className = "entry";

    div.innerHTML = `
      <div class="date" onclick="toggle(this)">ğŸ“… ${key}</div>
      <div class="content">
        ${text.replace(" / ", "<br>")}
        ${image ? `<img src="${image}" style="max-width:100%;margin-top:8px;">` : ""}
      </div>
    `;

    container.prepend(div);
  }
}

function toggle(el) {
  const content = el.nextElementSibling;
  content.style.display =
    content.style.display === "none" ? "block" : "none";
}

renderHistory();
</script>


</body>
</html>
